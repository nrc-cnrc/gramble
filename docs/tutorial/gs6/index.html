<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/gs6" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Flat vs. nested structure | Gramble</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nrc-cnrc.github.io/gramble/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://nrc-cnrc.github.io/gramble/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://nrc-cnrc.github.io/gramble/docs/tutorial/gs6"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Flat vs. nested structure | Gramble"><meta data-rh="true" name="description" content="Flat vs. nested: What&#x27;s the difference?"><meta data-rh="true" property="og:description" content="Flat vs. nested: What&#x27;s the difference?"><link data-rh="true" rel="icon" href="/gramble/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nrc-cnrc.github.io/gramble/docs/tutorial/gs6"><link data-rh="true" rel="alternate" href="https://nrc-cnrc.github.io/gramble/docs/tutorial/gs6" hreflang="en"><link data-rh="true" rel="alternate" href="https://nrc-cnrc.github.io/gramble/docs/tutorial/gs6" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gramble/blog/rss.xml" title="Gramble RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gramble/blog/atom.xml" title="Gramble Atom Feed"><link rel="stylesheet" href="/gramble/assets/css/styles.1a5dfa7c.css">
<script src="/gramble/assets/js/runtime~main.aedfc737.js" defer="defer"></script>
<script src="/gramble/assets/js/main.6bd78f07.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gramble/"><div class="navbar__logo"><img src="/gramble/img/logo.svg" alt="Gramble Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gramble/img/logo.svg" alt="Gramble Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Gramble</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/gramble/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/gramble/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nrc-cnrc/gramble" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gramble/docs/intro">Gramble Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/gramble/docs/category/tutorial">Tutorial</a><button aria-label="Collapse sidebar category &#x27;Tutorial&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs1">What is Gramble?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs2">Linguistic programs as databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs3">A simple Gramble program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs4">Adding more fields</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs5">From transducer to database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gramble/docs/tutorial/gs6">Flat vs. nested</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gramble/docs/tutorial/gs7">Circumfixes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/gramble/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/gramble/docs/category/gramble-for-programmers">Gramble for Programmers</a><button aria-label="Expand sidebar category &#x27;Gramble for Programmers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gramble/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/gramble/docs/category/tutorial"><span itemprop="name">Tutorial</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Flat vs. nested</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Flat vs. nested structure</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flat-vs-nested-whats-the-difference">Flat vs. nested: What&#x27;s the difference?<a href="#flat-vs-nested-whats-the-difference" class="hash-link" aria-label="Direct link to Flat vs. nested: What&#x27;s the difference?" title="Direct link to Flat vs. nested: What&#x27;s the difference?">​</a></h2>
<p>The previous examples used a structure where we define each morpheme (e.g., that the root can be &quot;call&quot; or &quot;jump&quot;, that the suffix can be &quot;s&quot; or &quot;ing&quot; or &quot;ed&quot;, etc.) and then at the end we concatenate all the morphemes together.  Let&#x27;s call that a &quot;<em>flat</em>&quot; structure.  (You might also call it a &quot;templatic&quot; structure, but I&#x27;m going to avoid that term here because it can mean a lot of things.  You might be modeling a language that linguists say has &quot;templatic morphology&quot;, but you might not want to structure your <em>grammar</em> that way.)</p>
<p>But there&#x27;s another way of doing this, where we build up the structure piece-by-piece.  It barely matters for an English verb because they&#x27;re so simple, but for illustration let&#x27;s consider the noun &quot;counter-reformation&quot;.  The intuitive way of talking about how this word is formed is by saying we start with &quot;form&quot;, then add a piece to get &quot;reform&quot;, then add another piece to get &quot;reformation&quot;, then finally another piece to get &quot;counter-reformation&quot;.  It might seem more complex at first (because we&#x27;re going from inside-out, rather than left-to-right), but some things are just easier to express from the inside-out.</p>
<p>For example, certain phonological rules might only apply at particular stages of the construction, and that&#x27;s hard to express if we&#x27;re assembling everything at the end, left-to-right, in one fell swoop.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-swahili-verbs">Example: Swahili verbs<a href="#example-swahili-verbs" class="hash-link" aria-label="Direct link to Example: Swahili verbs" title="Direct link to Example: Swahili verbs">​</a></h2>
<p>We&#x27;ll use Swahili verbs for illustration.  Swahili is the first or second language for more than 100 million people in East Africa, and serves as a regional <em>lingua franca</em>.  Swahili verbs are fairly complex overall, but there <em>are</em> parts of the verb system that are relatively straightforward, and we&#x27;ll start with those.</p>
<p>The first thing to do before you start writing a program is <strong>understand exactly what phenonemon you want to model</strong> so that you can make a plan.  Let&#x27;s say our goal is modeling Swahili verbs in the present, perfect, and past tenses, with 1st, 2nd, and 3rd person (I, you, he/she/it) singular subjects.  They look like this:</p>
<table><thead><tr><th><strong>text</strong></th><th style="text-align:center"><strong>subj</strong></th><th><strong>tense</strong></th><th><strong>root</strong></th></tr></thead><tbody><tr><td>ninapenda</td><td style="text-align:center">1</td><td>pres</td><td>love</td></tr><tr><td>unapenda</td><td style="text-align:center">2</td><td>pres</td><td>love</td></tr><tr><td>anapenda</td><td style="text-align:center">3</td><td>pres</td><td>love</td></tr><tr><td>nilipenda</td><td style="text-align:center">1</td><td>past</td><td>love</td></tr><tr><td>ulipenda</td><td style="text-align:center">2</td><td>past</td><td>love</td></tr><tr><td>alipenda</td><td style="text-align:center">3</td><td>past</td><td>love</td></tr><tr><td>nimependa</td><td style="text-align:center">1</td><td>perf</td><td>love</td></tr><tr><td>umependa</td><td style="text-align:center">2</td><td>perf</td><td>love</td></tr><tr><td>amependa</td><td style="text-align:center">3</td><td>perf</td><td>love</td></tr><tr><td>ninaona</td><td style="text-align:center">1</td><td>pres</td><td>see</td></tr><tr><td>unaona</td><td style="text-align:center">2</td><td>pres</td><td>see</td></tr><tr><td>anaona</td><td style="text-align:center">3</td><td>pres</td><td>see</td></tr><tr><td>niliona</td><td style="text-align:center">1</td><td>past</td><td>see</td></tr><tr><td>uliona</td><td style="text-align:center">2</td><td>past</td><td>see</td></tr><tr><td>aliona</td><td style="text-align:center">3</td><td>past</td><td>see</td></tr><tr><td>nimeona</td><td style="text-align:center">1</td><td>perf</td><td>see</td></tr><tr><td>umeona</td><td style="text-align:center">2</td><td>perf</td><td>see</td></tr><tr><td>ameona</td><td style="text-align:center">3</td><td>perf</td><td>see</td></tr></tbody></table>
<p>Study the table for a few minutes to get a good sense of what we need to model.  Do you notice any patterns?  Here are three patterns we can notice:</p>
<ul>
<li>All the 1st person subject forms start with <code>ni</code>, all the 2nd person forms start with <code>u</code>, and all the 3rd person forms start with <code>a</code>.</li>
<li>After these subject markers, you find <code>na</code> in all the present forms, <code>li</code> in all the past forms, and <code>me</code> in all the perfect forms.</li>
<li>All of the forms with &quot;love&quot; contain <code>penda</code>, so presumably that means <code>love</code>.  (Actually it&#x27;s <code>pend</code>, and it happens that all of these verb forms have a suffix <code>a</code> at the end.  Most verb forms end in <code>a</code>, although a few root/conjugations combinations end in other vowels.  We&#x27;ll ignore that for now, though, and pretend the root is <code>penda</code>.)  Meanwhile all the forms with &quot;see&quot; contain <code>ona</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-flat-grammar">The <em>flat</em> grammar<a href="#the-flat-grammar" class="hash-link" aria-label="Direct link to the-flat-grammar" title="Direct link to the-flat-grammar">​</a></h2>
<p>Here&#x27;s the &quot;flat&quot; style of grammar that we&#x27;ve been using so far:</p>
<table><thead><tr><th style="text-align:center"><strong>Person = </strong></th><th style="text-align:center"><strong>text</strong></th><th style="text-align:center"><strong>subj</strong></th><th style="text-align:center"></th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center">ni</td><td style="text-align:center">1</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">u</td><td style="text-align:center">2</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">a</td><td style="text-align:center">3</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"> </td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>Tense =</strong></td><td style="text-align:center"><strong>text</strong></td><td style="text-align:center"><strong>tense</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">na</td><td style="text-align:center">pres</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">li</td><td style="text-align:center">past</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">me</td><td style="text-align:center">perf</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"> </td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>Root =</strong></td><td style="text-align:center"><strong>text</strong></td><td style="text-align:center"><strong>root</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">penda</td><td style="text-align:center">love</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ona</td><td style="text-align:center">see</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"> </td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>Verb =</strong></td><td style="text-align:center"><strong>embed</strong></td><td style="text-align:center"><strong>embed</strong></td><td style="text-align:center"><strong>embed</strong></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">Person</td><td style="text-align:center">Tense</td><td style="text-align:center">Root</td></tr></tbody></table>
<p>Remember that an <code>embed</code> header causes the cell below it (say, <code>Person</code>) to be interpreted as containing any form generated by the <code>Person</code> table.  That&#x27;s 3 forms, and then those are concatenated with any of the 3 forms from the <code>Tense</code> table, for 9 possible forms.  Then those 9 forms are concatenated with any of the 2 forms from the <code>Verb</code> table.  That&#x27;s 3 x 3 x 2 = 18 possible forms, total... and that&#x27;s exactly how many forms were in the original table above.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-nested-grammar">The <em>nested</em> grammar<a href="#the-nested-grammar" class="hash-link" aria-label="Direct link to the-nested-grammar" title="Direct link to the-nested-grammar">​</a></h2>
<p>Here&#x27;s another way of structuring the same grammar, by building up the stem bit by bit.  For example, to build &quot;ninapenda&quot;, we would start with the Root <code>penda</code>, then build a TenseStem <code>napenda</code> by adding a tense prefix, and finally building a Verb <code>ninapenda</code> by adding a person prefix.</p>
<table><thead><tr><th style="text-align:center"><strong>Root =</strong></th><th style="text-align:center"><strong>text</strong></th><th style="text-align:center"><strong>root</strong></th><th style="text-align:center"></th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center">penda</td><td style="text-align:center">love</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ona</td><td style="text-align:center">see</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"> </td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>TenseStem = </strong></td><td style="text-align:center"><strong>text</strong></td><td style="text-align:center"><strong>tense</strong></td><td style="text-align:center"><strong>embed</strong></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">na</td><td style="text-align:center">pres</td><td style="text-align:center">Root</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">li</td><td style="text-align:center">past</td><td style="text-align:center">Root</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">me</td><td style="text-align:center">perf</td><td style="text-align:center">Root</td></tr><tr><td style="text-align:center"> </td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>Verb =</strong></td><td style="text-align:center"><strong>text</strong></td><td style="text-align:center"><strong>subj</strong></td><td style="text-align:center"><strong>embed</strong></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">ni</td><td style="text-align:center">1</td><td style="text-align:center">TenseStem</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">u</td><td style="text-align:center">2</td><td style="text-align:center">TenseStem</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">a</td><td style="text-align:center">3</td><td style="text-align:center">TenseStem</td></tr></tbody></table>
<p>Note that there&#x27;s nothing special about the order we wrote these in, we could also have listed <code>Verb</code> first and <code>Root</code> last.  The important part is the structure of the <code>embeds</code>.  Each <code>Verb</code> line embeds the <code>TenseStem</code> table, each <code>TenseStem</code> line embeds the <code>Root</code> table.</p>
<p>Let&#x27;s look closely at what the first line of the <code>TenseStem</code> table is doing.  We&#x27;ll step through it left-to-right.  It&#x27;s adding <code>text:na</code> to the output, then adding <code>tense:pres</code> to the output, giving us the result <code>{text:na, tense:pres}</code>.  And then it hits <code>embed: Root</code>. This cell has two possibilities, so it does both, it takes the current output and adds <code>{text:penda, root:love}</code>, giving us <code>{text:napenda, tense:pres, root:love}</code>, and it <strong>ALSO</strong> takes the current output and adds <code>{text:ona, root:see}</code>, giving us another output <code>{text:naona, tense:pres, root:see}</code>.</p>
<p>So this line has two outputs, and so do the other lines in <code>TenseStem</code>, so <code>TenseStem</code> has 2 x 3 = 6 outputs.</p>
<p>The same kind of thing is happening in the <code>Verb</code> table.  Each line embeds <code>TenseStem</code> (with 6 outputs), and there are 3 lines again, so that&#x27;s 6 x 3 = 18 outputs -- same as the &quot;flat&quot; grammar, and same as the original table.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-nested">Why nested?<a href="#why-nested" class="hash-link" aria-label="Direct link to Why nested?" title="Direct link to Why nested?">​</a></h2>
<p>This structure is a little more complicated, so why would we want to do it?</p>
<ul>
<li>
<p>It&#x27;s often simpler to describe the construction of words as an inward-out, nested process (like &quot;counter-reformation&quot; above)</p>
</li>
<li>
<p>As mentioned, sometimes phonological rules only apply at certain stages of the construction process.  By giving those stages names like TenseStem, we can apply phonological rules to that unit alone (rather than to the whole word).</p>
</li>
<li>
<p>Also, we can apply tests to those units alone.  For example, test that unit <em>can</em> generate the form <code>waona</code> but can&#x27;t generate the incorrect form <code>uona</code>.  Being able to test individual units is often easier than testing whole words (because many things can go wrong in a whole word, besides what you&#x27;re testing for).</p>
</li>
<li>
<p>It lets us handle circumfixes and certain kinds of long-distance dependencies more easily... more on that in the next chapter!</p>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gramble/docs/tutorial/gs5"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">From transducer to database</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gramble/docs/tutorial/gs7"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Circumfixes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#flat-vs-nested-whats-the-difference" class="table-of-contents__link toc-highlight">Flat vs. nested: What&#39;s the difference?</a></li><li><a href="#example-swahili-verbs" class="table-of-contents__link toc-highlight">Example: Swahili verbs</a></li><li><a href="#the-flat-grammar" class="table-of-contents__link toc-highlight">The <em>flat</em> grammar</a></li><li><a href="#the-nested-grammar" class="table-of-contents__link toc-highlight">The <em>nested</em> grammar</a></li><li><a href="#why-nested" class="table-of-contents__link toc-highlight">Why nested?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gramble/docs/intro">Gramble Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gramble/blog">Gramble Blog</a></li><li class="footer__item"><a href="https://github.com/nrc-cnrc/gramble" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 National Research Council Canada. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>