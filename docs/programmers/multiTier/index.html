<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-programmers/multiTier" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Why multiple tiers? | Gramble</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nrc-cnrc.github.io/gramble/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://nrc-cnrc.github.io/gramble/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://nrc-cnrc.github.io/gramble/docs/programmers/multiTier"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Why multiple tiers? | Gramble"><meta data-rh="true" name="description" content="A lot of the original motivation for Gramble (or, to be precise, the systems that preceded Gramble) is that we needed systems that could express relationships between more than two tiers."><meta data-rh="true" property="og:description" content="A lot of the original motivation for Gramble (or, to be precise, the systems that preceded Gramble) is that we needed systems that could express relationships between more than two tiers."><link data-rh="true" rel="icon" href="/gramble/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nrc-cnrc.github.io/gramble/docs/programmers/multiTier"><link data-rh="true" rel="alternate" href="https://nrc-cnrc.github.io/gramble/docs/programmers/multiTier" hreflang="en"><link data-rh="true" rel="alternate" href="https://nrc-cnrc.github.io/gramble/docs/programmers/multiTier" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gramble/blog/rss.xml" title="Gramble RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gramble/blog/atom.xml" title="Gramble Atom Feed"><link rel="stylesheet" href="/gramble/assets/css/styles.1a5dfa7c.css">
<script src="/gramble/assets/js/runtime~main.aedfc737.js" defer="defer"></script>
<script src="/gramble/assets/js/main.6bd78f07.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gramble/"><div class="navbar__logo"><img src="/gramble/img/logo.svg" alt="Gramble Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/gramble/img/logo.svg" alt="Gramble Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Gramble</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/gramble/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/gramble/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nrc-cnrc/gramble" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/gramble/docs/intro">Gramble Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/gramble/docs/category/tutorial">Tutorial</a><button aria-label="Expand sidebar category &#x27;Tutorial&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/gramble/docs/category/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/gramble/docs/category/gramble-for-programmers">Gramble for Programmers</a><button aria-label="Collapse sidebar category &#x27;Gramble for Programmers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gramble/docs/programmers/multiTier">Multiple tiers</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/gramble/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/gramble/docs/category/gramble-for-programmers"><span itemprop="name">Gramble for Programmers</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Multiple tiers</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Why multiple tiers?</h1></header><p>A lot of the original motivation for Gramble (or, to be precise, the systems that preceded Gramble) is that we needed systems that could express relationships between more than two tiers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="case-study-1">Case study #1<a href="#case-study-1" class="hash-link" aria-label="Direct link to Case study #1" title="Direct link to Case study #1">​</a></h2>
<p>For example, we were once writing a pre-processing system for the Uyghur language (for the system described in Littell et al. 2017), but other teams of people wanted to use the output, and each team wanted a different kind of output representation.</p>
<ul>
<li>
<p>The machine translation team just wanted the root of each word (so that a word like <code>kishilerning</code> would come out as <code>kishi</code>.  (They also sometimes wanted all the word parts, like <code>kishi</code>, <code>ler</code>, and <code>ning</code>.)</p>
</li>
<li>
<p>The event detection team (who wanted to know things like whether the event was currently happening or in the past) wanted all the component parts with labels, like <code>people</code>, <code>PLURAL</code>, <code>GENITIVE</code>.  That way they could just look for things like <code>PAST</code> without having to know exactly how the past tense looks in this language.</p>
</li>
<li>
<p>A team of humans, overseeing the whole process and wanting to make sure that all system outputs were basically reasonable, wanted a rough, human-readable English rendering like <code>of multiple people</code>.</p>
</li>
</ul>
<p>This caused a dilemma, because a conventional finite state transducer (FST) system only allows for the specification of two levels of representation.  One of these has to be the actual text form (like <code>kishilerning</code>), but what should the second form be?</p>
<p>We could have built four systems, one for each output.  Or we could build a chain of three systems: one system that turns <code>kishilerning</code> into <code>kishi, ler, ning</code>, one that turns that into <code>people, PLURAL, GENITIVE</code>, and one that turns that into <code>of multiple people</code>.  But that would involve a lot of duplication of knowledge: what parts mean what, how they can be ordered with respect to each other, etc., and this was a system that was <em>very rapidly</em> evolving in a chaotic work environment.  (We only had about 36 hours to develop the first iteration of this system!)  There was basically no way to engineer four systems at once and keep them in sync.</p>
<p>So instead, we wrote a system from scratch (that is, without any pre-existing parser library) that could generate multiple different kinds of outputs at once.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="case-study-2">Case study #2<a href="#case-study-2" class="hash-link" aria-label="Direct link to Case study #2" title="Direct link to Case study #2">​</a></h2>
<p>Going in the other direction, let&#x27;s consider a verb conjugator app, like the one described in Kazantseva et al. 2018.  The user has to choose several pieces of information: what verb they want to conjugate, its tense/mood (e.g., past, habitual, etc.), and who the subject and object are (e.g., first person subject, second person object).</p>
<p>Underneath the app, there&#x27;s an FST that converts a gloss (for example, go-2OBJ-PAST-3SUB) into a real word in the target language.  However, there&#x27;s one slight snag, in that the FST expects that gloss to be in a specific order, but the user of the app has input several unordered pieces of information.  This means that the app has to know how to order them in the way that the FST expects, or else the FST simply won&#x27;t have any output.</p>
<p>The order that the FST expects these elements isn&#x27;t something that we can usually specify to be universal across all languages; it depends on the language and how the FST&#x27;s author decided to order the elements in their code.  (Often that&#x27;s the order in which they occur in the target language, but not always.)  So in practice, the user interface has to know, <em>for a particular language model</em>, what order the morphemes should come in.  That&#x27;s usually fairly straightforward, but not necessarily: there are languages where, for example, 3rd singular subjects are expressed as suffixes while 1st and 2nd subjects are expressed as prefixes, or languages where particular combinations of subject and object combine into one unit.</p>
<p>You can probably see the issue: to order the input units, the user interface has to have some kind of language-specific ordering model that&#x27;s potentially almost as complex as the FST itself.  But ideally, we shouldn&#x27;t have to model the language <em>twice</em>... that information about morpheme ordering is already in the FST!  It&#x27;s just that the FST software itself expects just one input representation and one output representation.</p>
<p>What we really need here is a system that allows <em>multiple</em> input representations, un-ordered with respect to each other.  For example, we input <code>go</code> on the root tier, <code>2</code> on the object tier, <code>PAST</code> on the tense tier, and <code>3</code> on the subject tier.  We don&#x27;t specify the relative order that these will actually occur in; we don&#x27;t have to know in advance.  We just ask the system, &quot;Give me the possible words where these elements occur on the appropriate tiers, whatever order they happen to come in.&quot;</p>
<p>In conclusion, a lot of linguistic modeling tasks are inherently between multiple levels of representation.  When this is the case, but we can only choose two levels of representation to build into the FST, we often end up in a situation where aspects of the target language have to be modeled <em>outside</em> of the FST, whereas ideally everything about the language should be modeled in a single place.</p>
<p>In Gramble, the multiple tiers are implemented using <em>typed transducer combinators</em>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/gramble/docs/category/gramble-for-programmers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Gramble for Programmers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#case-study-1" class="table-of-contents__link toc-highlight">Case study #1</a></li><li><a href="#case-study-2" class="table-of-contents__link toc-highlight">Case study #2</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gramble/docs/intro">Gramble Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/gramble/blog">Gramble Blog</a></li><li class="footer__item"><a href="https://github.com/nrc-cnrc/gramble" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 National Research Council Canada. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>